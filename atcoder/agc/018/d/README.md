# AtCoder Grand Contest 018

## [AGC018] D - Tree and Hamilton Path

### 方針

完全グラフでの移動を考える代わりに、木の上での移動距離が最大となるような頂点の順序を考える。

1. いったん、ハミルトンパスではなくすべての頂点を通ってもとの頂点に戻ってくるような辿り方をした時の最大距離を考え、
2. その後、最も距離が短い1箇所の移動を取り除きハミルトンパスとすることを考える。

ここで、木のある辺(u, v)を通ることができる上限回数は 2 * min(size(u), size(v)) 回である。
ただし、size(u), size(v) はそれぞれ辺(u, v)でグラフを切った時の u と v の属する木のサイズである。
各辺の上限回数は、木の重心から dfs を行うことで効率的に計算できる。これで、1 が計算できる。

2 については、場合分けを行う。

a. 重心が1つだけ存在する場合 (centroidal)  
    重心につながる辺のうち、最も短い辺を辺(u, v)とすると、u v 間の移動を取り除けばいい。
b. 重心が2つ存在する場合 (bicentroidal)  
    2つの重心はある1つの辺で隣接している。その辺を(u, v)とすると、u v 間の移動を取り除けばいい。


### 計算量

O( N )


### keywords

木の重心, centroid, ハミルトンパス


