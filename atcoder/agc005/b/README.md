# AtCoder Grand Contest 005

## B - Minimum Sum [AC]

### 方針

最小値が $a_i$ となる区間の個数をそれぞれ求める。

$a_i$ が最小となる区間のうち最も長いものを $l \le i \le r$ とする。最初は、すべての $i$ について $l = r = i$ と初期化しておく。 $a_i$ を、値が大きいものから順に一つずつ見ていった時に、 $a_i$ がすでに見た区間と隣接していた場合はその区間を merge することで、自分が最小値となる区間を求めることができる。

$a_i$ が最小となる区間の個数を $s_i$ とすると、 $s_i = (r - i + 1) * (i - l + 1)$ である。

$\sum_{i=1}^{N} a_i s_i$ がもとめる答えである。

区間の管理には、 UnionFind の各集合の root が各区間の $l$ 、 $r$ を保持するように改造して用いた。（ちなみに、解説では set を用いていたので、そっちのほうがコード量は少なくなる思う。）


### 計算量

O( N )


### keywords

UnionFind, 区間の merge, 区間の集合

