# [ARC082] E - ConvexScore

## 問題概要

2次元上のN点が与えられる。N点から幾つかを選んでSとする。Sを頂点とする図形が面積正の凸多角形となるようなすべてのSについて、Sのスコアの和を求める。ただし、Sのスコアは $2^{n - |S|}$ で与えられる。


## 方針

スコアの意味を考えることから始める。

$2^{n - |S|}$ は、凸多角形 $S$ 上もしくは内部の点（ $T_S$ とする）の部分集合の数である。
$T_S$ のある部分集合を $T_S' \subseteq T_S$ とし、 $X = S \cup T_S'$ とする。
$S$ は $X$ の凸包となっている。
このとき、 $X$ はN点の部分集合のうちの一つと対応する。逆に、N点のある部分集合 $X$ は一つの $S \cup T_S'$ と（ほぼ）対応する。

「ほぼ」というのは、 $X$ のうち、すべての点が一直線に並ぶ（=共線な）ものは凸包の面積が0となるからである。

従って言い換えると、求めるスコアの和は、

2^N - （N点の部分集合のうち共線なものの数）

となる。具体的には、 2^N から以下のものを引く。

- 選ぶ頂点が3点未満のケース
- 同一直線上の頂点から3点以上選ぶケース


## 計算量

直線の傾きを正規化することで、

O( N^2 log N )

にできる。傾きの正規化は、 `pair<int, int>` に既約分数を持たせるように扱うことで行った。


## keywords

凸包, 共線, 傾き, 集合, 数え上げ
